<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Examples.Translation</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">module</a> <a id="32" href="Examples.Translation.html" class="Module">Examples.Translation</a> <a id="53" class="Keyword">where</a>

<a id="60" class="Keyword">open</a> <a id="65" class="Keyword">import</a> <a id="72" href="Common.Fuel.html" class="Module">Common.Fuel</a>
<a id="84" class="Keyword">open</a> <a id="89" class="Keyword">import</a> <a id="96" href="Common.Context.html" class="Module">Common.Context</a>
<a id="111" class="Keyword">open</a> <a id="116" class="Keyword">import</a> <a id="123" href="Common.Type.html" class="Module">Common.Type</a>
<a id="135" class="Keyword">open</a> <a id="140" class="Keyword">import</a> <a id="147" href="Transform.Translation.html" class="Module">Transform.Translation</a>
<a id="169" class="Keyword">open</a> <a id="174" class="Keyword">import</a> <a id="181" href="Examples.R.html" class="Module">Examples.R</a>
<a id="192" class="Keyword">open</a> <a id="197" class="Keyword">import</a> <a id="204" href="R.Syntax.html" class="Module">R.Syntax</a>
<a id="213" class="Keyword">open</a> <a id="218" class="Keyword">import</a> <a id="225" href="L.Syntax.html" class="Module">L.Syntax</a>
<a id="234" class="Keyword">open</a> <a id="239" class="Keyword">import</a> <a id="246" href="L.Semantics.html" class="Module">L.Semantics</a>
<a id="258" class="Keyword">open</a> <a id="263" class="Keyword">import</a> <a id="270" href="L.Semantics.Definitional.html" class="Module">L.Semantics.Definitional</a>

<a id="296" class="Keyword">open</a> <a id="301" class="Keyword">import</a> <a id="308" href="Data.Product.html" class="Module">Data.Product</a> <a id="321" class="Keyword">using</a> <a id="327" class="Symbol">(</a><a id="328" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a><a id="333" class="Symbol">;</a> <a id="335" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a><a id="340" class="Symbol">)</a>
<a id="342" class="Keyword">open</a> <a id="347" class="Keyword">import</a> <a id="354" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="392" class="Keyword">using</a> <a id="398" class="Symbol">(</a><a id="399" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="402" class="Symbol">;</a> <a id="404" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="408" class="Symbol">)</a>
<a id="410" class="Keyword">open</a> <a id="415" class="Keyword">import</a> <a id="422" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="431" class="Keyword">using</a> <a id="437" class="Symbol">(</a><a id="438" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="439" class="Symbol">;</a> <a id="441" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="444" class="Symbol">)</a>
<a id="446" class="Keyword">open</a> <a id="451" class="Keyword">import</a> <a id="458" href="Data.Sum.html" class="Module">Data.Sum</a> <a id="467" class="Keyword">using</a> <a id="473" class="Symbol">(</a><a id="474" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a><a id="478" class="Symbol">)</a>

<a id="481" class="Comment">-- This is term expected when transforming term `1+2` from Examples.R</a>
<a id="551" class="Comment">-- with gas 3. Notice l-term has an additional app, because of closure.</a>
<a id="l-term"></a><a id="623" href="Examples.Translation.html#623" class="Function">l-term</a> <a id="630" class="Symbol">:</a> <a id="632" href="Common.Context.html#260" class="InductiveConstructor">∅</a> <a id="634" href="L.Syntax.html#164" class="Datatype Operator">⊪</a> <a id="636" href="Common.Type.html#208" class="InductiveConstructor">ℕ´</a>
<a id="639" href="Examples.Translation.html#623" class="Function">l-term</a> <a id="646" class="Symbol">=</a> <a id="648" href="L.Syntax.html#446" class="InductiveConstructor">app</a>
          <a id="662" class="Symbol">(</a><a id="663" href="L.Syntax.html#446" class="InductiveConstructor">app</a>
           <a id="678" class="Symbol">(</a><a id="679" href="L.Syntax.html#446" class="InductiveConstructor">app</a>
            <a id="695" class="Symbol">(</a><a id="696" href="L.Syntax.html#367" class="InductiveConstructor">abs</a>
             <a id="713" class="Symbol">(</a><a id="714" href="L.Syntax.html#367" class="InductiveConstructor">abs</a>
              <a id="732" class="Symbol">(</a><a id="733" href="L.Syntax.html#367" class="InductiveConstructor">abs</a>
               <a id="752" class="Symbol">(</a><a id="753" href="L.Syntax.html#528" class="InductiveConstructor">match</a> <a id="759" class="Symbol">(</a><a id="760" href="L.Syntax.html#313" class="InductiveConstructor">var</a> <a id="764" class="Symbol">(</a><a id="765" href="Common.Context.html#388" class="InductiveConstructor">there</a> <a id="771" href="Common.Context.html#361" class="InductiveConstructor">here</a><a id="775" class="Symbol">))</a> <a id="778" class="Symbol">(</a><a id="779" href="L.Syntax.html#313" class="InductiveConstructor">var</a> <a id="783" href="Common.Context.html#361" class="InductiveConstructor">here</a><a id="787" class="Symbol">)</a>
                <a id="805" class="Symbol">(</a><a id="806" href="L.Syntax.html#446" class="InductiveConstructor">app</a>
                 <a id="827" class="Symbol">(</a><a id="828" href="L.Syntax.html#446" class="InductiveConstructor">app</a>
                  <a id="850" class="Symbol">(</a><a id="851" href="L.Syntax.html#367" class="InductiveConstructor">abs</a>
                   <a id="874" class="Symbol">(</a><a id="875" href="L.Syntax.html#367" class="InductiveConstructor">abs</a>
                    <a id="899" class="Symbol">(</a><a id="900" href="L.Syntax.html#528" class="InductiveConstructor">match</a> <a id="906" class="Symbol">(</a><a id="907" href="L.Syntax.html#313" class="InductiveConstructor">var</a> <a id="911" class="Symbol">(</a><a id="912" href="Common.Context.html#388" class="InductiveConstructor">there</a> <a id="918" href="Common.Context.html#361" class="InductiveConstructor">here</a><a id="922" class="Symbol">))</a> <a id="925" class="Symbol">(</a><a id="926" href="L.Syntax.html#313" class="InductiveConstructor">var</a> <a id="930" href="Common.Context.html#361" class="InductiveConstructor">here</a><a id="934" class="Symbol">)</a>
                     <a id="957" class="Symbol">(</a><a id="958" href="L.Syntax.html#446" class="InductiveConstructor">app</a>
                      <a id="984" class="Symbol">(</a><a id="985" href="L.Syntax.html#446" class="InductiveConstructor">app</a>
                       <a id="1012" class="Symbol">(</a><a id="1013" href="L.Syntax.html#367" class="InductiveConstructor">abs</a>
                        <a id="1041" class="Symbol">(</a><a id="1042" href="L.Syntax.html#367" class="InductiveConstructor">abs</a>
                         <a id="1071" class="Symbol">(</a><a id="1072" href="L.Syntax.html#528" class="InductiveConstructor">match</a> <a id="1078" class="Symbol">(</a><a id="1079" href="L.Syntax.html#313" class="InductiveConstructor">var</a> <a id="1083" class="Symbol">(</a><a id="1084" href="Common.Context.html#388" class="InductiveConstructor">there</a> <a id="1090" href="Common.Context.html#361" class="InductiveConstructor">here</a><a id="1094" class="Symbol">))</a> <a id="1097" class="Symbol">(</a><a id="1098" href="L.Syntax.html#313" class="InductiveConstructor">var</a> <a id="1102" href="Common.Context.html#361" class="InductiveConstructor">here</a><a id="1106" class="Symbol">)</a>
                          <a id="1134" class="Symbol">(</a><a id="1135" href="L.Syntax.html#446" class="InductiveConstructor">app</a>
                           <a id="1166" class="Symbol">(</a><a id="1167" href="L.Syntax.html#446" class="InductiveConstructor">app</a>
                            <a id="1199" class="Symbol">(</a><a id="1200" href="L.Syntax.html#367" class="InductiveConstructor">abs</a>
                             <a id="1233" class="Symbol">(</a><a id="1234" href="L.Syntax.html#367" class="InductiveConstructor">abs</a>
                              <a id="1268" class="Symbol">(</a><a id="1269" href="L.Syntax.html#528" class="InductiveConstructor">match</a> <a id="1275" class="Symbol">(</a><a id="1276" href="L.Syntax.html#313" class="InductiveConstructor">var</a> <a id="1280" class="Symbol">(</a><a id="1281" href="Common.Context.html#388" class="InductiveConstructor">there</a> <a id="1287" href="Common.Context.html#361" class="InductiveConstructor">here</a><a id="1291" class="Symbol">))</a> <a id="1294" class="Symbol">(</a><a id="1295" href="L.Syntax.html#313" class="InductiveConstructor">var</a> <a id="1299" href="Common.Context.html#361" class="InductiveConstructor">here</a><a id="1303" class="Symbol">)</a>
                               <a id="1336" class="Symbol">(</a><a id="1337" href="L.Syntax.html#446" class="InductiveConstructor">app</a> <a id="1341" class="Symbol">(</a><a id="1342" href="L.Syntax.html#446" class="InductiveConstructor">app</a> <a id="1346" href="L.Syntax.html#199" class="InductiveConstructor">error</a> <a id="1352" class="Symbol">(</a><a id="1353" href="L.Syntax.html#313" class="InductiveConstructor">var</a> <a id="1357" href="Common.Context.html#361" class="InductiveConstructor">here</a><a id="1361" class="Symbol">))</a> <a id="1364" class="Symbol">(</a><a id="1365" href="L.Syntax.html#258" class="InductiveConstructor">suc´</a> <a id="1370" class="Symbol">(</a><a id="1371" href="L.Syntax.html#313" class="InductiveConstructor">var</a> <a id="1375" class="Symbol">(</a><a id="1376" href="Common.Context.html#388" class="InductiveConstructor">there</a> <a id="1382" href="Common.Context.html#361" class="InductiveConstructor">here</a><a id="1386" class="Symbol">)))))))</a>
                            <a id="1422" class="Symbol">(</a><a id="1423" href="L.Syntax.html#313" class="InductiveConstructor">var</a> <a id="1427" href="Common.Context.html#361" class="InductiveConstructor">here</a><a id="1431" class="Symbol">))</a>
                           <a id="1461" class="Symbol">(</a><a id="1462" href="L.Syntax.html#258" class="InductiveConstructor">suc´</a> <a id="1467" class="Symbol">(</a><a id="1468" href="L.Syntax.html#313" class="InductiveConstructor">var</a> <a id="1472" class="Symbol">(</a><a id="1473" href="Common.Context.html#388" class="InductiveConstructor">there</a> <a id="1479" href="Common.Context.html#361" class="InductiveConstructor">here</a><a id="1483" class="Symbol">)))))))</a>
                       <a id="1514" class="Symbol">(</a><a id="1515" href="L.Syntax.html#313" class="InductiveConstructor">var</a> <a id="1519" href="Common.Context.html#361" class="InductiveConstructor">here</a><a id="1523" class="Symbol">))</a>
                      <a id="1548" class="Symbol">(</a><a id="1549" href="L.Syntax.html#258" class="InductiveConstructor">suc´</a> <a id="1554" class="Symbol">(</a><a id="1555" href="L.Syntax.html#313" class="InductiveConstructor">var</a> <a id="1559" class="Symbol">(</a><a id="1560" href="Common.Context.html#388" class="InductiveConstructor">there</a> <a id="1566" href="Common.Context.html#361" class="InductiveConstructor">here</a><a id="1570" class="Symbol">)))))))</a>
                  <a id="1596" class="Symbol">(</a><a id="1597" href="L.Syntax.html#313" class="InductiveConstructor">var</a> <a id="1601" href="Common.Context.html#361" class="InductiveConstructor">here</a><a id="1605" class="Symbol">))</a>
                 <a id="1625" class="Symbol">(</a><a id="1626" href="L.Syntax.html#258" class="InductiveConstructor">suc´</a> <a id="1631" class="Symbol">(</a><a id="1632" href="L.Syntax.html#313" class="InductiveConstructor">var</a> <a id="1636" class="Symbol">(</a><a id="1637" href="Common.Context.html#388" class="InductiveConstructor">there</a> <a id="1643" href="Common.Context.html#361" class="InductiveConstructor">here</a><a id="1647" class="Symbol">))))))))</a>
            <a id="1668" class="Symbol">(</a><a id="1669" href="L.Syntax.html#367" class="InductiveConstructor">abs</a> <a id="1673" class="Symbol">{</a><a id="1674" class="Argument">τ₁</a> <a id="1677" class="Symbol">=</a> <a id="1679" href="Common.Type.html#208" class="InductiveConstructor">ℕ´</a><a id="1681" class="Symbol">}</a> <a id="1683" class="Symbol">(</a><a id="1684" href="L.Syntax.html#367" class="InductiveConstructor">abs</a> <a id="1688" class="Symbol">{</a><a id="1689" class="Argument">τ₁</a> <a id="1692" class="Symbol">=</a> <a id="1694" href="Common.Type.html#208" class="InductiveConstructor">ℕ´</a><a id="1696" class="Symbol">}</a> <a id="1698" href="L.Syntax.html#229" class="InductiveConstructor">zero´</a><a id="1703" class="Symbol">)))</a>
           <a id="1718" class="Symbol">(</a><a id="1719" href="L.Syntax.html#258" class="InductiveConstructor">suc´</a> <a id="1724" href="L.Syntax.html#229" class="InductiveConstructor">zero´</a><a id="1729" class="Symbol">))</a>
          <a id="1742" class="Symbol">(</a><a id="1743" href="L.Syntax.html#258" class="InductiveConstructor">suc´</a> <a id="1748" class="Symbol">(</a><a id="1749" href="L.Syntax.html#258" class="InductiveConstructor">suc´</a> <a id="1754" href="L.Syntax.html#229" class="InductiveConstructor">zero´</a><a id="1759" class="Symbol">))</a>

<a id="1763" class="Comment">-- The result of transformation</a>
<a id="tr-term"></a><a id="1795" href="Examples.Translation.html#1795" class="Function">tr-term</a> <a id="1803" class="Symbol">:</a> <a id="1805" href="Common.Context.html#260" class="InductiveConstructor">∅</a> <a id="1807" href="L.Syntax.html#164" class="Datatype Operator">⊪</a> <a id="1809" href="Common.Type.html#208" class="InductiveConstructor">ℕ´</a>
<a id="1812" href="Examples.Translation.html#1795" class="Function">tr-term</a> <a id="1820" class="Symbol">=</a> <a id="1822" href="Transform.Translation.html#4956" class="Function">transform</a> <a id="1832" class="Symbol">(</a><a id="1833" href="Common.Fuel.html#111" class="InductiveConstructor">gas</a> <a id="1837" class="Number">3</a><a id="1838" class="Symbol">)</a> <a id="1840" href="Examples.R.html#1643" class="Function">1+2</a>

<a id="1845" class="Comment">-- It is as expected</a>
<a id="1866" href="Examples.Translation.html#1866" class="Function">_</a> <a id="1868" class="Symbol">:</a> <a id="1870" href="Examples.Translation.html#1795" class="Function">tr-term</a> <a id="1878" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1880" href="Examples.Translation.html#623" class="Function">l-term</a>
<a id="1887" class="Symbol">_</a> <a id="1889" class="Symbol">=</a> <a id="1891" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="1897" class="Comment">-- The evalation of the closure yields the expected result</a>
<a id="1956" href="Examples.Translation.html#1956" class="Function">_</a> <a id="1958" class="Symbol">:</a> <a id="1960" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="1966" class="Symbol">(</a><a id="1967" href="L.Semantics.html#4392" class="Function">output</a> <a id="1974" class="Symbol">(</a><a id="1975" href="L.Semantics.html#4318" class="Function">⊪-eval</a> <a id="1982" class="Symbol">(</a><a id="1983" href="Common.Fuel.html#111" class="InductiveConstructor">gas</a> <a id="1987" class="Number">100</a><a id="1990" class="Symbol">)</a> <a id="1992" href="Examples.Translation.html#1795" class="Function">tr-term</a><a id="1999" class="Symbol">))</a> <a id="2002" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2004" href="L.Syntax.html#258" class="InductiveConstructor">suc´</a> <a id="2009" class="Symbol">(</a><a id="2010" href="L.Syntax.html#258" class="InductiveConstructor">suc´</a> <a id="2015" class="Symbol">(</a><a id="2016" href="L.Syntax.html#258" class="InductiveConstructor">suc´</a> <a id="2021" href="L.Syntax.html#229" class="InductiveConstructor">zero´</a><a id="2026" class="Symbol">))</a>
<a id="2029" class="Symbol">_</a> <a id="2031" class="Symbol">=</a> <a id="2033" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre></body></html>